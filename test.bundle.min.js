(()=>{var v="!bpmwjqxynzDsrHNldtgkh45vF7BcfuaoeEAYL62T83V1i";function P(n,s){return String.fromCharCode(57376+n+(n>>4<<5)+(s<<4))}function x(n,s,e){let t=-1;if(typeof e=="boolean"||e==="try"){let i=n==="1"?"!":n.toUpperCase(),o=n.toLowerCase();e&&i!==o&&(t=v.indexOf(i)),t===-1&&e!==!0&&(t=v.indexOf(o))}else t=v.indexOf(n);if(t!==-1)return P(t,s)}function T(n,s){if(n==null)throw new TypeError(`${s} appears to be ${n}`);return n}function R(n,s){if(n==null)throw new TypeError(s);return n}var p=class{constructor(){this.eventListeners=[]}on(s,e){this.eventListeners.push({type:s,handler:e})}emit(s,...e){for(let t of this.eventListeners)t.type===s&&t.handler.apply(this,e)}};function f(n,s,e){return s>=n.left&&s<n.right&&e>=n.top&&e<n.bottom}var Y=100,O=20,B=30,N=Math.PI/2,F=50,q=150,V=150,X=250,j=500,z=100;function G(){let n=[[..."12345678"],[..."qwertyuiop"],[..."asdfghjkl"],[..."zxcvbnm"]],s=[1,0,2],e=s.map(()=>n.map(()=>[]));return n.forEach((t,i)=>{t.forEach((o,h)=>{s.forEach((a,u)=>{let c=x(o,a),d=x(o,a,!0),_={default:c};d&&(_.altgr=d),e[u][i][h]=_})})}),e}function A(n){return n.map(s=>Array.from(s,e=>typeof e=="string"?{default:e[0],altgr:e[1]}:e))}var U=A(["1234567890",[..."\u27E6\u27E7:;()","*\xD7",{default:"$",altgr:"\xA5"},..."&@"],["-\u2014","/\xF7",...'<>~\u201C\u201D"\xB7'],[...".,?!",{default:"\u2019",altgr:"\u2018",toggleSymbol:!0}]]),J=A([[..."\uE001\uE002\uE003\uE004\uE005\uE006\uE007\uE008\uE009",{default:"\uE00A",altgr:"\uE00B"}],[..."[]{}#%^","+\u2212",..."=\uE00C"],[..."\\|\u2039\u203A\u2662\xAB\xBB",{default:"\u21E7",altgr:"\u21E9"},"`"],[...".,?!",{default:"'",toggleSymbol:!0}]]);function Q(n){return n instanceof HTMLElement||n instanceof SVGElement}function r(n,s){return R(n.querySelector(s),`CSS selector '${s}' matched nothing`)}var y=class extends p{constructor(e){super();this.$targetDoc=null;this._disposed=!1;this.docEventListeners=[];this.symbols=!1;this.layoutIndex=0;e=e||document,this.$doc=e,this.$targetDoc=e,this.$container=e.createElement("div"),this.$container.innerHTML='<div class=bar><div class=bar-brand>\uE027\uE061\uE09D\uE099IME</div><button class="bar-btn bar-btn-switch">\u{1F310}\uFE0E</button><button class="bar-btn bar-btn-close">\u2715</button></div><div class=xdi8kbd lang=qdx><div class=row><input class=key-insertionmark type=hidden></div><div class=row><input class=key-insertionmark type=hidden></div><div class=row><div class=halfpad></div><input class=key-insertionmark type=hidden><div class=halfpad></div></div><div class=row><div class="key-wrap key-fixed key-18"><button class="key key-gray key-shift" data-state=0><svg class="key-icon key-icon-shift" height=1em viewBox="0 0 100 100"><path d="M32 56V78q0 7 7 7h22q7 0 7-7V56H90q5 0 0-4L51 13Q50 12 49 13L10 52q-5 4 0 4Z" fill=none stroke=currentColor stroke-width=7 stroke-linecap=round stroke-linejoin=miter /></svg><svg class="key-icon key-icon-shift-filled" height=1em viewBox="0 0 100 100"><path d="M32 56V78q0 7 7 7h22q7 0 7-7V56H90q5 0 0-4L51 13Q50 12 49 13L10 52q-5 4 0 4Z" fill=currentColor stroke=currentColor stroke-width=7 /></svg><svg class="key-icon key-icon-shift-filled-locked" height=1em viewBox="0 0 100 100"><path d="M32 48v10q0 6 6 6h26q6 0 6-6V48H89q4 0 0-4L51 10Q50 9 49 10L11 44q-4 4 0 4ZM64 77q6 0 6 6v4q0 6-6 6H38q-6 0-6-6v-4q0-6 6-6z" fill=currentColor stroke=currentColor stroke-width=7 /></svg></button></div><div class="key-wrap key-fixed key-18" hidden><button class="key key-gray key-captsm key-symbolshift"><div class=key-label></div></button></div><div class=quarterpad></div><input class=key-insertionmark type=hidden><div class=quarterpad></div><div class="key-wrap key-fixed key-18" role=button><button class="key key-gray key-bksp"><svg class="key-icon key-icon-bksp" height=1em viewBox="0 0 100 100"><path d="M82 14q10 0 10 10v52q0 10-10 10h-37q-7 0-14-7l-21-23q-6-6 0-12l21-23q7-7 14-7z" fill=none stroke=currentColor stroke-width=7 stroke-linecap=round stroke-linejoin=round /><path d="M57 55l11.5 11.5a3.5355 3.5355 90 005-5l-11.5-11.5 11.5-11.5a3.5355 3.5355 90 00-5-5l-11.5 11.5-11.5-11.5a3.5355 3.5355 90 00-5 5l11.5 11.5-11.5 11.5a3.5355 3.5355 90 005 5z" fill=currentColor /></svg><svg class="key-icon key-icon-bksp-filled" height=1em viewBox="0 0 100 100"><path d="M82 14q10 0 10 10v52q0 10-10 10h-37q-7 0-14-7l-21-23q-6-6 0-12l21-23q7-7 14-7z" fill=none stroke=currentColor stroke-width=7 stroke-linecap=round stroke-linejoin=round /><path d="M82 14q10 0 10 10v52q0 10-10 10h-37q-7 0-14-7l-21-23q-6-6 0-12l21-23q7-7 14-7zM57 55l11.5 11.5a3.5355 3.5355 90 005-5l-11.5-11.5 11.5-11.5a3.5355 3.5355 90 00-5-5l-11.5 11.5-11.5-11.5a3.5355 3.5355 90 00-5 5l11.5 11.5-11.5 11.5a3.5355 3.5355 90 005 5z" fill=currentColor /></svg></button></div></div><div class=row><div class="key-wrap key-fixed key-14"><button class="key key-gray key-captsm key-symbol"><div class=key-label></div></button></div><div class=key-wrap data-key=" " id=xdi8kbd-key-space><button class="key key-captsm key-space"><div class=key-label>\uE054\uE09A\uE07C\uE063\uE09D\uE091</div></button></div><div class="key-wrap key-fixed key-14"><button class="key key-gray key-captsm key-enter"><div class=key-label>\uE089\uE06D\uE094\uE077\uE091\uE03E</div></button></div></div></div><div class=balloon hidden role=presentation></div>',this.$container.className="xdi8kbd-wrap",this.$container.hidden=!0,this.$container.addEventListener("touchstart",t=>{t.preventDefault()}),this.$container.addEventListener("touchmove",t=>{t.preventDefault()}),this.$container.addEventListener("mousedown",t=>{t.button===0&&t.preventDefault()}),this.$body=r(this.$container,".xdi8kbd"),this.printables=new L(this),this.shift=new M(r(this.$container,".key-shift"),this),this.bksp=new D(r(this.$container,".key-bksp"),this),this.enter=new S(r(this.$container,".key-enter"),this),this.symbol=new H(r(this.$container,".key-symbol"),this),this.symbolShift=new I(r(this.$container,".key-symbolshift"),this),this.layouts=G(),this.symbolLayouts=[U,J],this.closeBtn=new C(r(this.$container,".bar-btn-close"),this),this.closeBtn.press=()=>{var i;let t=(i=this.$doc)==null?void 0:i.activeElement;Q(t)&&t.blur()},this.$parent=document.createElement("xdi8-ime-keyboard"),document.documentElement.appendChild(this.$parent),this.$style=e.createElement("style"),this.$style.textContent=`:host{display:block;font-family:XEGOEPUAall}[hidden]{display:none!important}.xdi8kbd-wrap{position:fixed;bottom:0;left:0;right:0;z-index:1000;user-select:none;transition:visibility .8s,bottom .8s cubic-bezier(.25,1,0,1)}.xdi8kbd-wrap[hidden]{display:revert!important;visibility:hidden;bottom:-18rem}.xdi8kbd-wrap{--color-text: black;--color-bg: #d0d3d9;--color-key: #fff;--color-press: #aab0bb;--color-shad: #87898d;--color-ext: #7795ac;--color-bar: #f0f0f1;--color-action: #3478f6}@media screen and (prefers-color-scheme: dark){.xdi8kbd-wrap{--color-text: white;--color-bg: #6f6f6f;--color-key: #9b9b9b;--color-press: #797979;--color-shad: #434343;--color-ext: #bce;--color-bar: #464748;--color-action: #fff}}.bar{position:relative;padding:.5rem 0;background-color:var(--color-bar, #eee);border-top:1px solid var(--color-bg)}.bar-brand{text-align:center;color:var(--color-press)}.bar-btn{position:absolute;top:0;bottom:0;padding:0 .5rem;border:none;color:var(--color-action);font:inherit;font-weight:700;background-color:transparent}.bar-btn:active{opacity:.5}.bar-btn-switch{left:0}.bar-btn-close{right:0}.xdi8kbd{background-color:var(--color-bg);color:var(--color-text);padding-bottom:16px;font-size:1rem}.xdi8kbd-wrap[data-theme=glass] .xdi8kbd{opacity:87%;backdrop-filter:blur(50px);-webkit-backdrop-filter:blur(50px)}.row{display:flex}.key-wrap{display:flex;justify-content:stretch;align-items:stretch}.key-wrap:not(.key-fixed){flex:1}.key-18{width:12.5%}.key-14{width:25%}.halfpad{width:5%}.quarterpad{width:2.5%}.key{width:100%;box-sizing:border-box;margin:.3125rem .1875rem;height:2.25rem;padding:0;border:none;color:inherit;font-size:1.5rem;font-family:inherit;background-color:var(--color-key);border-radius:.3125rem;box-shadow:0 1px var(--color-shad);position:relative}.key.pressed,.key-gray{background-color:var(--color-press)}.key-gray.pressed{background-color:var(--color-key)}.key-shift:not([data-state="0"]){background-color:#fff;color:#000}.key-shift:not([data-state="0"]).ext{color:#7795ac}.key-label,.key-icon{position:absolute;inset:0;margin:auto}.key-label{width:fit-content;height:fit-content}.key-shift .key-icon,.key-bksp .key-icon{visibility:hidden}.key-shift[data-state="0"] .key-icon-shift,.key-shift[data-state="1"] .key-icon-shift-filled,.key-shift[data-state="2"] .key-icon-shift-filled,.key-shift[data-state="3"] .key-icon-shift-filled-locked,.key-bksp:not(.pressed) .key-icon-bksp,.key-bksp.pressed .key-icon-bksp-filled{visibility:inherit}.xdi8kbd-wrap[data-funny-shift] .key-shift .key-icon{transition:transform .15s}.key-shift[data-state="2"] .key-icon{transform:rotate(180deg)}.key-shift[data-state="3"] .key-icon{transform:rotate(360deg)}.key.ext{color:var(--color-ext)}.key:disabled{color:var(--color-bg)}.xdi8kbd[data-layout="0"] .key-printable .key-label{transform:translateY(-.0625em)}.xdi8kbd[data-layout="1"] .key-printable .key-label{transform:translateY(.0625em)}.xdi8kbd[data-layout="2"] .key-printable .key-label{transform:translateY(-.125em)}.key-captsm{font-size:1rem}.balloon{position:absolute;font:2.25rem XEGOEPUAall;line-height:3rem;min-width:3rem;padding:.375rem 0;text-align:center;color:var(--color-text);background-color:var(--color-key);border-radius:.46875rem;box-shadow:0 4px 16px #0000004d;transform:translate(-50%,calc(-100% - 1rem))}.xdi8kbd-wrap[hidden]~.xdi8kbd-pad{transition:height .8s cubic-bezier(.25,1,0,1)}
/*# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2tleWJvYXJkL3N0eWxlLmNzcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiOmhvc3Qge1xuICBkaXNwbGF5OiBibG9jaztcbiAgZm9udC1mYW1pbHk6IFwiWEVHT0VQVUFhbGxcIjtcbn1cblxuW2hpZGRlbl0ge1xuICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG59XG5cbi54ZGk4a2JkLXdyYXAge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDsgcmlnaHQ6IDA7XG4gIHotaW5kZXg6IDEwMDA7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuXG4gIHRyYW5zaXRpb246IHZpc2liaWxpdHkgMC44cywgYm90dG9tIDAuOHMgY3ViaWMtYmV6aWVyKDAuMjUsIDEsIDAsIDEpO1xufVxuLnhkaThrYmQtd3JhcFtoaWRkZW5dIHtcbiAgZGlzcGxheTogcmV2ZXJ0ICFpbXBvcnRhbnQ7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgYm90dG9tOiAtMThyZW07XG59XG5cbi54ZGk4a2JkLXdyYXAge1xuICAtLWNvbG9yLXRleHQ6IGJsYWNrO1xuICAtLWNvbG9yLWJnOiAjZDBkM2Q5O1xuICAtLWNvbG9yLWtleTogI2ZmZjtcbiAgLS1jb2xvci1wcmVzczogI2FhYjBiYjtcbiAgLS1jb2xvci1zaGFkOiAjODc4OThkO1xuICAtLWNvbG9yLWV4dDogIzc3OTVhYztcbiAgLS1jb2xvci1iYXI6ICNmMGYwZjE7XG4gIC0tY29sb3ItYWN0aW9uOiAjMzQ3OGY2O1xufVxuQG1lZGlhIHNjcmVlbiBhbmQgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4ueGRpOGtiZC13cmFwIHtcbiAgLS1jb2xvci10ZXh0OiB3aGl0ZTtcbiAgLS1jb2xvci1iZzogIzZmNmY2ZjtcbiAgLS1jb2xvci1rZXk6ICM5YjliOWI7XG4gIC0tY29sb3ItcHJlc3M6ICM3OTc5Nzk7XG4gIC0tY29sb3Itc2hhZDogIzQzNDM0MztcbiAgLS1jb2xvci1leHQ6ICNiY2U7XG4gIC0tY29sb3ItYmFyOiAjNDY0NzQ4O1xuICAtLWNvbG9yLWFjdGlvbjogI2ZmZjtcbn1cbn1cbi8qXG4ueGRpOGtiZC13cmFwW2RhdGEtdGhlbWU9XCJnbGFzc1wiXSB7XG4gIC0tY29sb3ItdGV4dDogd2hpdGU7XG4gIC0tY29sb3ItYmc6ICMzNDM0MzQ7XG4gIC0tY29sb3Ita2V5OiAjNzk3OTc5O1xuICAtLWNvbG9yLXByZXNzOiAjNTA1MDUwO1xuICAtLWNvbG9yLXNoYWQ6ICMxZDFkMWQ7XG4gIC0tY29sb3ItZXh0OiAjYmNlO1xuICAtLWNvbG9yLWJhcjogIzM0MzQzNDtcbiAgYmFja2dyb3VuZDogY2VudGVyIC8gY29udGFpbiBuby1yZXBlYXQgdXJsKFwiaHR0cHM6Ly93aWtpLnhkaTgudG9wL3cvaW1hZ2VzL2UvZWQvWGRpOF9BaG8ucG5nXCIpO1xufSovXG5cbi5iYXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHBhZGRpbmc6IDAuNXJlbSAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iYXIsICNlZWUpO1xuICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tY29sb3ItYmcpO1xufVxuLmJhci1icmFuZCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXByZXNzKTtcbn1cbi5iYXItYnRuIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcblxuICBwYWRkaW5nOiAwIDAuNXJlbTtcbiAgYm9yZGVyOiBub25lO1xuICBjb2xvcjogdmFyKC0tY29sb3ItYWN0aW9uKTtcbiAgZm9udDogaW5oZXJpdDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG5cbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG4uYmFyLWJ0bjphY3RpdmUge1xuICBvcGFjaXR5OiAwLjU7XG59XG4uYmFyLWJ0bi1zd2l0Y2gge1xuICBsZWZ0OiAwO1xufVxuLmJhci1idG4tY2xvc2Uge1xuICByaWdodDogMDtcbn1cblxuLnhkaThrYmQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iZyk7XG4gIC8qbWF4LXdpZHRoOiAyNHJlbTsqL1xuICBjb2xvcjogdmFyKC0tY29sb3ItdGV4dCk7XG4gIHBhZGRpbmctYm90dG9tOiAxNnB4O1xuICBmb250LXNpemU6IDFyZW07XG59XG4ueGRpOGtiZC13cmFwW2RhdGEtdGhlbWU9XCJnbGFzc1wiXSAueGRpOGtiZCB7XG4gIG9wYWNpdHk6IDg3JTtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDUwcHgpO1xuICAtd2Via2l0LWJhY2tkcm9wLWZpbHRlcjogYmx1cig1MHB4KTtcbn1cblxuLnJvdyB7XG4gIGRpc3BsYXk6IGZsZXg7XG59XG5cbi5rZXktd3JhcCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3RyZXRjaDtcbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG59XG4ua2V5LXdyYXA6bm90KC5rZXktZml4ZWQpIHsgZmxleDogMSB9XG4ua2V5LTE4IHsgd2lkdGg6IDEyLjUlIH1cbi5rZXktMTQgeyB3aWR0aDogMjUlIH1cbi5oYWxmcGFkIHsgd2lkdGg6IDUlIH1cbi5xdWFydGVycGFkIHsgd2lkdGg6IDIuNSUgfVxuXG4ua2V5IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIG1hcmdpbjogMC4zMTI1cmVtIDAuMTg3NXJlbTtcbiAgaGVpZ2h0OiAyLjI1cmVtO1xuXG4gIHBhZGRpbmc6IDA7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6IGluaGVyaXQ7XG4gIGZvbnQtc2l6ZTogMS41cmVtO1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcblxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1rZXkpO1xuICBib3JkZXItcmFkaXVzOiAwLjMxMjVyZW07XG4gIGJveC1zaGFkb3c6IDAgMXB4IHZhcigtLWNvbG9yLXNoYWQpO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG4ua2V5LnByZXNzZWQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1wcmVzcykgfVxuLmtleS1ncmF5IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJlc3MpIH1cbi5rZXktZ3JheS5wcmVzc2VkIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Ita2V5KSB9XG4vKiBTaGlmdCBcdTk1MkVcdTU5MjdcdTUxOTlcdTYyMTZcdTRFMkRcdTUxOTlcdTcyQjZcdTYwMDEgKi9cbi5rZXktc2hpZnQ6bm90KFtkYXRhLXN0YXRlPVwiMFwiXSkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICBjb2xvcjogIzAwMDtcbn1cbi5rZXktc2hpZnQ6bm90KFtkYXRhLXN0YXRlPVwiMFwiXSkuZXh0IHsgY29sb3I6ICM3Nzk1YWMgfVxuXG4ua2V5LWxhYmVsLFxuLmtleS1pY29uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7IGxlZnQ6IDA7XG4gIG1hcmdpbjogYXV0bztcbn1cbi5rZXktbGFiZWwge1xuICB3aWR0aDogZml0LWNvbnRlbnQ7XG4gIGhlaWdodDogZml0LWNvbnRlbnQ7XG59XG4ua2V5LXNoaWZ0IC5rZXktaWNvbixcbi5rZXktYmtzcCAua2V5LWljb24geyB2aXNpYmlsaXR5OiBoaWRkZW4gfVxuLmtleS1zaGlmdFtkYXRhLXN0YXRlPVwiMFwiXSAua2V5LWljb24tc2hpZnQsXG4ua2V5LXNoaWZ0W2RhdGEtc3RhdGU9XCIxXCJdIC5rZXktaWNvbi1zaGlmdC1maWxsZWQsXG4ua2V5LXNoaWZ0W2RhdGEtc3RhdGU9XCIyXCJdIC5rZXktaWNvbi1zaGlmdC1maWxsZWQsXG4ua2V5LXNoaWZ0W2RhdGEtc3RhdGU9XCIzXCJdIC5rZXktaWNvbi1zaGlmdC1maWxsZWQtbG9ja2VkLFxuLmtleS1ia3NwOm5vdCgucHJlc3NlZCkgLmtleS1pY29uLWJrc3AsXG4ua2V5LWJrc3AucHJlc3NlZCAua2V5LWljb24tYmtzcC1maWxsZWQgeyB2aXNpYmlsaXR5OiBpbmhlcml0IH1cblxuLnhkaThrYmQtd3JhcFtkYXRhLWZ1bm55LXNoaWZ0XSAua2V5LXNoaWZ0IC5rZXktaWNvbiB7IHRyYW5zaXRpb246IHRyYW5zZm9ybSAxNTBtcyB9XG4ua2V5LXNoaWZ0W2RhdGEtc3RhdGU9XCIyXCJdIC5rZXktaWNvbiB7IHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZykgfVxuLmtleS1zaGlmdFtkYXRhLXN0YXRlPVwiM1wiXSAua2V5LWljb24geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpIH1cblxuLyogXHU1RTBDXHU2MjY5XHU1QjU3XHU2QkNEXHVGRjBDXHU0RUU1XHU1M0NBXHU2NkY0XHU1OTFBXHU1QjU3XHU2QkNEXHU3MkI2XHU2MDAxXHU0RTBCXHU3Njg0IFNoaWZ0IFx1OTUyRVx1RkYwQ1x1NjYzRVx1NzkzQVx1NEUzQVx1ODRERFx1ODI3MiAqL1xuLmtleS5leHQgeyBjb2xvcjogdmFyKC0tY29sb3ItZXh0KSB9XG4vKiBcdTc5ODFcdTc1MjhcdTYzMDlcdTk1MkUgKi9cbi5rZXk6ZGlzYWJsZWQge1xuICBjb2xvcjogdmFyKC0tY29sb3ItYmcpO1xuICAvKnRleHQtc2hhZG93OiAwIC0xcHggI2QwZDNkOTsqL1xufVxuXG4vKiBcdTRGN0ZcdTRFMERcdTU0MENcdTUxOTlcdTRGNTNcdTc2ODRcdTVCNTdcdTZCQ0RcdTc3MEJcdThENzdcdTY3NjVcdTkwRkRcdTU3ODJcdTc2RjRcdTVDNDVcdTRFMkQgKi9cbi54ZGk4a2JkW2RhdGEtbGF5b3V0PVwiMFwiXSAua2V5LXByaW50YWJsZSAua2V5LWxhYmVsIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0wLjA2MjVlbSkgfVxuLnhkaThrYmRbZGF0YS1sYXlvdXQ9XCIxXCJdIC5rZXktcHJpbnRhYmxlIC5rZXktbGFiZWwgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMC4wNjI1ZW0pIH1cbi54ZGk4a2JkW2RhdGEtbGF5b3V0PVwiMlwiXSAua2V5LXByaW50YWJsZSAua2V5LWxhYmVsIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0wLjEyNWVtKSB9XG5cbi8qIFx1N0E3QVx1NjgzQ1x1OTUyRVx1NEUwQVx1NzY4NFx1NUI1NyAqL1xuLmtleS1jYXB0c20geyBmb250LXNpemU6IDFyZW0gfVxuXG4vKiBcdTVCNTdcdTdCMjZcdTk4ODRcdTg5QzggKi9cbi5iYWxsb29uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBmb250OiAyLjI1cmVtIFwiWEVHT0VQVUFhbGxcIjtcbiAgbGluZS1oZWlnaHQ6IDNyZW07XG4gIG1pbi13aWR0aDogM3JlbTtcbiAgcGFkZGluZzogMC4zNzVyZW0gMDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogdmFyKC0tY29sb3ItdGV4dCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWtleSk7XG4gIGJvcmRlci1yYWRpdXM6IDAuNDY4NzVyZW07XG4gIGJveC1zaGFkb3c6IDAgNHB4IDE2cHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCBjYWxjKC0xMDAlIC0gMXJlbSkpO1xufVxuXG4ueGRpOGtiZC13cmFwW2hpZGRlbl0gfiAueGRpOGtiZC1wYWQge1xuICB0cmFuc2l0aW9uOiBoZWlnaHQgMC44cyBjdWJpYy1iZXppZXIoMC4yNSwgMSwgMCwgMSk7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiQUFBQSxNQUNFLFFBQVMsTUFDVCxZQUFhLFdBQ2YsQ0FFQSxDQUFDLFFBQ0MsUUFBUyxjQUNYLENBRUEsQ0FBQyxhQUNDLFNBQVUsTUFDVixPQUFRLEVBQ1IsS0FBTSxFQUFHLE1BQU8sRUFDaEIsUUFBUyxLQUNULFlBQWEsS0FFYixXQUFZLFdBQVcsR0FBSSxDQUFFLE9BQU8sSUFBSyxhQUFhLEdBQUksQ0FBRSxDQUFDLENBQUUsQ0FBQyxDQUFFLEVBQ3BFLENBQ0EsQ0FUQyxZQVNZLENBQUMsUUFDWixRQUFTLGlC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 */
`,this.$padding=e.createElement("div"),this.$padding.className="xdi8kbd-pad",this.$shadow=this.$parent.attachShadow({mode:"open"}),this.$shadow.appendChild(this.$style),this.$shadow.appendChild(this.$container),this.$shadow.appendChild(this.$padding)}get disposed(){return this._disposed}show(){this.$container.hidden=!1,this.emit("reset"),this.symbols=!1,this.layoutIndex=0,this.update()}hide(){this.$container.hidden=!0,this.$padding.style.height="0"}registerDocumentEventListener(e,t,i){this.docEventListeners.push([e,t,i]),this.$doc.addEventListener(e,t,i)}dispose(){if(!this._disposed){this.$parent.remove();for(let e of this.docEventListeners)this.$doc.removeEventListener(...e);this.docEventListeners.length=0,this._disposed=!0,Object.freeze(this)}}update(){let t=(this.symbols?this.symbolLayouts:this.layouts)[this.layoutIndex];this.printables.update(t),this.$body.dataset.layout=`${this.symbols?"symbol":""}${this.layoutIndex}`,this.$padding.style.height=`${this.$container.getBoundingClientRect().height}px`}execute(e,t){var i;(i=this.$targetDoc)==null||i.execCommand(e,!1,t)}},m=class{constructor(s,e){this.$wrap=s;this.$body=e;this._unpressHandle=0}show(){this.$wrap.hidden=!1}hide(){this.$wrap.hidden=!0}getRect(){return this.$wrap.getBoundingClientRect()}press(){this._pressTime=Date.now(),this.$body.classList.add("pressed"),clearTimeout(this._unpressHandle)}unpress(s){let e=s?0:this._pressTime+Y-Date.now();e>0?setTimeout(()=>void this.$body.classList.remove("pressed"),e):this.$body.classList.remove("pressed")}},k=class extends m{constructor(s){let e=s.ownerDocument;super(e.createElement("div"),e.createElement("button")),this.$wrap.className="key-wrap",this.$body.className="key",this.$body.Key=this,this.$wrap.appendChild(this.$body)}},b=class extends k{constructor(e){super(e);this.def=null;this.$body.classList.add("key-printable"),this.$label=this.$body.ownerDocument.createElement("div"),this.$label.className="key-label",this.$body.appendChild(this.$label),T(e.parentNode,"$mark.parentNode").insertBefore(this.$wrap,e)}update(e){if(this.def=e,!e){this.hide();return}this.show(),this.$label.textContent=e.default}},E=Symbol("mouse"),L=class{constructor(s){this.kbd=s;this.touchId=null;this.slid=!1;this.altgr=!1;this.activeKey=null;this.$marks=[...s.$container.querySelectorAll(".key-insertionmark")],this.rows=this.$marks.map(()=>[]),this.space=new $(r(s.$container,".key-space")),this.slidables=[this.space],this.balloon=new K(r(s.$container,".balloon"),this),s.$body.addEventListener("touchstart",e=>{for(let t of e.changedTouches)this.down(t.identifier,t.clientX,t.clientY)},{capture:!0,passive:!1}),s.$body.addEventListener("touchmove",e=>{for(let t of e.changedTouches)this.move(t.identifier,t.clientX,t.clientY)},{capture:!0,passive:!1}),s.$body.addEventListener("touchend",e=>{for(let t of e.changedTouches)this.up(t.identifier)},{capture:!0,passive:!1}),s.$body.addEventListener("touchcancel",e=>{for(let t of e.changedTouches)this.cancel(t.identifier)},!0),s.$body.addEventListener("mousedown",e=>{e.button===0&&this.down(E,e.clientX,e.clientY)},!0),s.registerDocumentEventListener("mousemove",e=>{e.button===0&&this.move(E,e.clientX,e.clientY)},!0),s.registerDocumentEventListener("mouseup",e=>{e.button===0&&this.up(E)},!0),s.on("bkspdown",()=>{this.touchId&&this.cancel(this.touchId)}),s.on("reset",()=>{this.touchId&&this.cancel(this.touchId)})}down(s,e,t){return this.touchId&&this.up(this.touchId),this.touchId=s,this.slid=!1,this.startY=t,this.altgr=!1,this.kbd.emit("touchstart"),this.move(s,e,t)}move(s,e,t){if(s!==this.touchId)return;let i=this.kbd.$body.getBoundingClientRect(),o=null;if(this.activeKey&&(o=this.activeKey.getRect(),typeof this.activeKey.def.altgr=="string"&&!this.slid&&e>=o.left-O&&e<o.right+O)){let a=t-this.startY,u=Math.abs(a)>B;this.altgr=u;let c=0;if(u){let d=(a>0?F:q)/N;c=Math.atan(a/d)*d}this.balloon.update(o,c);return}if(!f(i,e,t))return this.kbd.emit("touchout"),this.cancel(s);if(o&&f(o,e,t))return;let h=this.slidables.find(a=>{if(a!==this.activeKey)return o=a.getRect(),f(o,e,t)});h&&(this.activeKey&&(this.activeKey.unpress(!0),this.slid=!0,this.altgr=!1),h.press(),this.activeKey=h,this.balloon.update(),this.kbd.emit("printablekeytouch"))}up(s){if(s===this.touchId&&(this.touchId=null,this.activeKey)){let e=this.activeKey.def,t=this.altgr?e.altgr:e.default;this.kbd.execute("insertText",t),this.kbd.emit("printablekeypress",this.activeKey,this.altgr),this.activeKey.unpress(),this.balloon.hide(),this.activeKey=null}}cancel(s){s===this.touchId&&(this.touchId=null,this.activeKey&&(this.activeKey.unpress(!0),this.activeKey=null,this.balloon.hide(!0)))}update(s){this.slidables.length=0,this.slidables.push(this.space),this.rows.forEach((e,t)=>{let i=s[t];for(;e.length<i.length;)e.push(new b(this.$marks[t]));e.forEach((o,h)=>{o.update(i[h]),h<i.length&&this.slidables.push(o)})})}},K=class{constructor(s,e){this.$body=s;this.pka=e;this._hideHandle=0;this.shown=!1}show(){this.shown=!0,this._showTime=Date.now(),this.$body.hidden=!1,clearTimeout(this._hideHandle)}hide(s){this.shown=!1;let e=s?0:this._showTime+Y-Date.now();e>0?this._hideHandle=setTimeout(()=>void(this.$body.hidden=!0),e):this.$body.hidden=!0}update(s,e=0){if(!(this.pka.activeKey instanceof b)){this.hide();return}s||(s=this.pka.activeKey.getRect());let t=this.pka.activeKey.def,i=this.pka.kbd.$container.getBoundingClientRect();this.$body.textContent=this.pka.altgr?t.altgr||"":t.default,this.$body.style.left=`${s.left+s.width/2-i.left}px`,this.$body.style.top=`${s.top-i.top+e}px`,this.shown||this.show()}},g=class extends m{constructor(s){super(T(s.parentElement,"$body.parentElement"),s),s.Key=this}},$=class extends g{constructor(){super(...arguments);this.def={default:" "}}},l=class extends g{constructor(e,t){super(e);this.kbd=t;this.pressed=!1;this.$wrap.addEventListener("touchstart",i=>{this.pressed||this.down(i)},{passive:!1}),this.$wrap.addEventListener("touchend",i=>{this.pressed&&this.up(i)},{passive:!1}),this.$wrap.addEventListener("touchcancel",i=>{this.pressed&&this.cancel(i)}),this.$wrap.addEventListener("mousedown",i=>{i.button!==0||this.pressed||this.down(i)}),t.registerDocumentEventListener("mouseup",i=>{i.button!==0||!this.pressed||this.up(i)}),t.on("reset",()=>{this.reset()})}down(e){this.pressed=!0,this.press()}up(e){this.pressed=!1,this.unpress()}cancel(e){this.pressed=!1,this.unpress(!0)}reset(){this.pressed=!1,this.unpress(!0)}},M=class extends l{constructor(e,t){super(e,t);this.state=0;this.pressed=!1;this.downTime=-1/0;this.upTime=-1/0;this.otherKeyPressed=!1;this.returning=!1;t.on("printablekeypress",()=>{t.symbols||(this.otherKeyPressed=!0,this.state!==3&&!this.pressed&&(this.state=0,this.update()))})}getState(){return this.returning?1:this.state}down(e){this.pressed=!0,this.otherKeyPressed=!1;let t=e.timeStamp;this.state!==3&&this.upTime-this.downTime<=V&&t-this.upTime<=X?this.state=this.state===2?3:2:this.state===0?this.state=1:this.returning=!0,this.downTime=t,this.update()}up(e){this.pressed=!1;let t=e.timeStamp;(this.returning||this.otherKeyPressed)&&(this.returning=!1,this.state=0),this.upTime=t,this.update()}cancel(){this.pressed=!1,this.downTime=-1/0,this.update()}reset(){super.reset(),this.state=0,this.downTime=-1/0,this.upTime=-1/0,this.returning=!1,this.$body.dataset.state=String(0)}update(){let e=this.getState();this.$body.dataset.state=String(e),this.kbd.layoutIndex=e===3?1:e,this.kbd.update()}},D=class extends l{constructor(e,t){super(e,t);this.tickHandle=0;t.on("touchstart",()=>{this.cancel()})}tick(){this.kbd.execute("delete"),this.tickHandle=setTimeout(()=>this.tick(),z)}down(){super.down(),this.kbd.emit("bkspdown"),this.kbd.execute("delete"),this.tickHandle=setTimeout(()=>this.tick(),j)}up(){super.up(),clearTimeout(this.tickHandle)}cancel(){super.cancel(),clearTimeout(this.tickHandle)}},S=class extends l{constructor(s,e){super(s,e),e.on("touchout",()=>{this.cancel()}),e.on("printablekeytouch",()=>{this.cancel()})}up(){super.up(),this.kbd.execute("insertText",`
`),this.kbd.emit("enterpress")}},w=class extends l{constructor(e,t){super(e,t);this.$label=r(this.$body,".key-label"),this.$label.textContent=this.offText}down(){this.toggle()}up(){}cancel(){}reset(){this.$label.textContent=this.offText}},H=class extends w{constructor(e,t){super(e,t);this.offText="\uE087\uE066\uE09D\uE09A";this.onText="\uE05D\uE03E\uE095\uE043\uE093";this.otherKeyPressed=!1;t.on("printablekeypress",i=>{var o;this.kbd.symbols&&((o=i.def)!=null&&o.toggleSymbol||i instanceof $&&this.otherKeyPressed?this.toggle():this.otherKeyPressed=!0)}),t.on("enterpress",()=>{this.kbd.symbols&&this.otherKeyPressed&&this.toggle()})}down(){this.otherKeyPressed=!1,super.down()}reset(){this.kbd.symbolShift.hide(),this.kbd.shift.show(),super.reset()}toggle(){this.kbd.symbols=!this.kbd.symbols,this.kbd.layoutIndex=0,this.kbd.emit("reset"),this.kbd.symbols&&(this.kbd.shift.hide(),this.kbd.symbolShift.show(),this.$label.textContent=this.onText),this.kbd.update()}},I=class extends w{constructor(){super(...arguments);this.offText="#+=";this.onText="123"}toggle(){this.kbd.layoutIndex=+!this.kbd.layoutIndex,this.kbd.update(),this.$label.textContent=this.kbd.layoutIndex?this.onText:this.offText}},C=class{constructor(s,e){this.$body=s;this.kbd=e;this.pressed=!1;s.addEventListener("touchstart",()=>{this.pressed=!0}),s.addEventListener("touchend",()=>{this.pressed&&this.press(),this.pressed=!1}),s.addEventListener("mousedown",t=>{t.button===0&&(this.pressed=!0)}),s.addEventListener("mouseup",t=>{t.button===0&&(this.pressed&&this.press(),this.pressed=!1)}),e.registerDocumentEventListener("mouseup",t=>{t.button===0&&(this.pressed=!1)})}press(){}};var W=window.kbd=new y(document);W.show();})();
//# sourceMappingURL=test.bundle.min.js.map
